//===============–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –ø–∞–º—è—Ç–∏ –æ–±–º–µ–Ω–∞. —Ç–∏–ø: Unsigned Int===================
//
//| –Ω–æ–º–µ—Ä–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ | –Ω–æ–º–µ—Ä–∞ —è—á–µ–µ–∫ –º–∞—Å—Å–∏–≤–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ | —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ | –æ–ø–∏—Å–∞–Ω–∏–µ|
//
//  ‚Ññ | Share_Mem[‚Ññ] | —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ | ------------–û–ø–∏—Å–∞–Ω–∏–µ-------------------------------
//  1		0   		R_Quants,				—Ä–µ–≥–∏—Å—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
//  2   	1   		B_ac_TIC,			    –ê–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª —Å TIC (–æ–±–æ—Ä–æ—Ç—ã –¢–ú–ù)
//  3   	2   		ac_APG,     			–î–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ APG
//  4   	3  		 	ac_WRG,    				–î–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ WRG
//  5   	4   		ac_MFC1,      			–ü–æ—Ç–æ–∫ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì1 
//  6   	5   		ac_MFC2,    			–ü–æ—Ç–æ–∫ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì2
//  7   	6   		ac_CVM,                 –î–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ CVM
//  8   	7   		ac_7					–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
//  9   	8   		ac_8					–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
//                                              –†–µ–∑–µ—Ä–≤
//  14  	13      	com_rx					–†–µ–≥–∏—Å—Ç—Ä-–±—É—Ñ–µ—Ä –ø—Ä–∏–Ω—è—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
//  16		15			rg_dc		 			–†–µ–≥–∏—Å—Ç—Ä —Å–∏–≥–Ω–∞–ª–æ–≤ –î–ö
//  18		17			err_code				–ë—É—Ñ–µ—Ä –æ—à–∏–±–æ–∫ 
//          			       					–†–µ–∑–µ—Ä–≤
//  21  	20  								–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ü–∏–∫–ª–∞ –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è (–µ—Å–ª–∏ !=0 —Ç–æ
//												–±—ã–ª–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ => –æ–±–Ω–æ–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä)
//  22  	21  								–ù–æ–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
//  23		22									–ü–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–º–∞–Ω–¥—ã
//  24		23			au_MFC1					–ó–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì1
//  25		24			au_MFC2					–ó–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì2
//  26  	25      	au_Shd_speed            —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è –®–î
//  27  	26      	au_Shd_accel            —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è –®–î
//  28		27			rg_du	         		–†–µ–≥–∏—Å—Ç—Ä –î–£
//  29		28			au_servo1               –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ –∑–∞—Å–ª–æ–Ω–∫–∏
//  30		29			au_servo2               –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
//------------------------------------------------------------------------------------
//
//===============–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ‚Ññ1===============
//
// –Ω–æ–º–µ—Ä –±–∏—Ç–∞ | –ø—Ä–æ—Ü–µ—Å—Å	--------------------------------------------------------------
//		1		–§–í –æ—Ç–∫–∞—á–∫–∞
//		2		–í–í –æ—Ç–∫–∞—á–∫–∞
//		3		—Ä–∞–∑–≥–æ–Ω –¢–ú–ù
//		4		—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù
//		5		–Ω–∞–ø—É—Å–∫ –≥–∞–∑–∞ —á–µ—Ä–µ–∑ –†–†–ì1
//		6		–Ω–∞–ø—É—Å–∫ –≥–∞–∑–∞ —á–µ—Ä–µ–∑ –†–†–ì2
//		7		–ø—Ä–æ–¥—É–≤ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–µ–π–∫–∏
//		8		–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç 1
//------------------------------------------------------------------------------------
//
//===============–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥, –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ —Ä–∏–≥–∏—Å—Ç—Ä—ã ‚Ññ22 ==========================
//
// –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ 22 | –ø–æ—Ü–µ–¥—É—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥ | --–û–ø–∏—Å–∞–Ω–∏–µ----------------------
//			1		 		vacuum_start()				–ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ç–∫–∞—á–∫–∏
//			2				vacuum_stop()				–ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–∫–∞—á–∫–∏
//			3											–ü—Ä–æ—Ü–µ—Å—Å –Ω–∞–ø—É—Å–∫–∞ –≥–∞–∑–∞ —á–µ—Ä–µ–∑ –†–†–ì1
//			4				napusk_start()				–ü—Ä–æ—Ü–µ—Å—Å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –Ω–∞–ø—É—Å–∫–∞ –≥–∞–∑–∞ —á–µ—Ä–µ–∑ –†–†–ì2
//          5											–û—Ç–∫—Ä—ã—Ç–∏–µ/–ó–∞–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–ø–∞–Ω–æ–≤
//          6											–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–µ—Ä–≤–æ–¥–≤–∏–≥–∞—Ç–µ–ª—è –∑–∞—Å–ª–æ–Ω–∫–∏
//          7											–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–µ—Ä–≤–æ–¥–≤–∏–≥–∞—Ç–µ–ª—è –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
//          51											–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–∞ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç 1
//			52-57			otpravka_symvolov() 		–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ 
//														–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç 1 –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –®–î
//          52											–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ —à–∞–≥–æ–≤–æ–≥–æ –¥–≤–∏–≥–∞—Ç–µ–ª—è
//          53				SMC_reset()					–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –®–î
//          54											–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –®–î –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ
//          55											–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –®–î –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ —à–∞–≥–æ–≤ –ø–æ —á–∞—Å–æ–≤–æ–π
//          56											–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –®–î –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ —à–∞–≥–æ–≤ –ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π
//          57											—Å–∫–∞–Ω–∏—Ä—É—é—â–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –®–î
//          100											–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã
//          10/20										–≤–∫–ª./–≤—ã–∫–ª. –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–∫–∞—á–∫–∏
//          30/40										–≤–∫–ª./–≤—ã–∫–ª. –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–¥—É–≤–∫–∏ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–µ–π–∫–∏
//          1000	    	Avarya();					–∞–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç–∫–∞—á–∫–∏
//------------------------------------------------------------------------------------
//
//===============–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–º–∞–Ω–¥, –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ —Ä–∏–≥–∏—Å—Ç—Ä—ã ‚Ññ23 ===============
//
// –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ 22 | –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ 23 | ---–û–ø–∏—Å–∞–Ω–∏–µ--------------------------
//			1					1/2					–ó–∞–ø—É—Å–∫ –§–í–ù/–¢–ú–ù
//			2					1/2					–û—Å—Ç–∞–Ω–æ–≤ –§–í–ù/–¢–ú–ù
//			5					1 - 6				–Ω–æ–º–µ—Ä –∫–ª–∞–ø–∞–Ω–∞
//			6					0 - 4379			—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–í –Ω–∞ –∫–∞–Ω–∞–ª –ê–£	
//			7					0 - 4379			—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–í –Ω–∞ –∫–∞–Ω–∞–ª –ê–£
//			51					?					–∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ ASCII
//			52					1/2					1 - –≤—Ä–∞—â–∞—Ç—å –ø–æ —á–∞—Å–æ–≤–æ–π 2 - –ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π
//			54					0 - 800				–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –≤ —à–∞–≥–∞—Ö –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ 0 –ø–æ–ª–æ–∂–µ–Ω–∏—è
//			55,56				0 - ?				–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
//			57					?					—Å–µ–∫—Ç–æ—Ä —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –≥—Ä–∞–¥—É—Å–∞—Ö								
//------------------------------------------------------------------------------------
//
//===============–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –±—É—Ñ–µ—Ä–µ –æ—à–∏–±–æ–∫ ‚Ññ18 ===============================
//
// –Ω–æ–º–µ—Ä –±–∏—Ç–∞ | –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏-------------------------------------------------------
//		1		–æ—à–∏–±–∫–∞ –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ APG (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
//		2		–¥–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ç—Ä–±—É–µ–º–æ–µ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å–∫–∞ –¢–ú–ù
//		3		–ø–ª–æ—Ö–æ–π –≤–∞–∫—É—É–º (–¥–∞–≤–ª–µ–Ω–∏–µ WRG –≤–æ–∑—Ä–æ—Å–ª–æ –≤—ã—à–µ —Ç—Ä–µ—É–µ–º–æ–≥–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¢–ú–ù)
//		4		–æ—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–π–º–µ—Ä–∞ –ü–õ–ö	
//		5		–æ—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ COM-–ø–æ—Ä—Ç–∞ 1							
//------------------------------------------------------------------------------------

//	–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è:
//	–†–†–ì - —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞ —Ä–∞—Å—Ö–æ–¥–∞ –≥–∞–∑–∞
//	–¢–ú–ù - —Ç—É—Ä–±–æ–º–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π –Ω–∞—Å–æ—Å
//	–§–í–ù - —Ñ–æ—Ä–≤–∞–∫—É—É–º–Ω—ã–π –Ω–∞—Å–æ—Å
//	–§–í - —Ñ–æ—Ä–≤–∞–∫—É—É–º–Ω—ã–π
//	–í–í - –≤—ã—Å–æ–∫–æ–≤–∞–∫—É—É–º–Ω—ã–π
//	–®–î - —à–∞–≥–æ–≤—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å
//	–î–ö - –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
//	–î–£ - –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
//	–ê–ö - –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
//	–ê–£ - –∞–Ω–∞–ª–æ–≥–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
//	–ü–õ–ö - –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º—ã–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
//	TIC - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–∞–∫—É—É–º–∞

//	–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –ü–õ–ö
#include "mod.h"
#include "5510drv.h"
#include "stdlib.h"
#include "math.h"

//–†–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏ –æ–±–º–µ–Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞ - 31 —Ä–µ–≥–∏—Å—Ç—Ä
#define sizeofShareMem	31

//===================–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö=========================================
unsigned int		// –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
Share_Mem[sizeofShareMem],	//–ø–∞–º—è—Ç—å –æ–±–º–µ–Ω–∞
R_Quants=0,			// —Ä–µ–≥–∏—Å—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
rg_dc,				// —Ä–µ–≥–∏—Å—Ç—Ä –î–ö
rg_du,				// —Ä–µ–≥–∏—Å—Ç—Ä –î–£
command=0,			// –∫–æ–¥ –∫–æ–º–∞–Ω–¥—ã
dop_command=0,		// –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ –∫–æ–º–∞–Ω–¥—ã
err_code=0;			// –±—É—Ñ–µ—Ä –æ—à–∏–±–æ–∫

//-------------------- –Ω–æ–º–µ—Ä–∞ –º–æ–¥—É–ª—å–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –ü–õ–ö -----------------------------------
unsigned char
slot_au=0,			// –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ —Å –º–æ–¥—É–ª–µ–º –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è;
slot_ac=1,			// –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ —Å –º–æ–¥—É–ª–µ–º –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è;
slot_dc=2,			// –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ —Å –º–æ–¥—É–ª–µ–º –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è;
slot_du=3;  		// –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ —Å –º–æ–¥—É–ª–µ–º –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è;

//-------------------- –Ω–æ–º–µ—Ä–∞ –∫–∞–Ω–∞–ª–æ–≤ –º–æ–¥—É–ª—è –ê–ö –ü–õ–ö ----------------------------------
unsigned int
B_ac_TIC=0,			// —Å–∏–≥–Ω–∞–ª —Ä–∞–∑–≥–æ–Ω –¢–ú–ù
B_ac_APG=1,   		// —Å–∏–≥–Ω–∞–ª –¥–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ APG
B_ac_WRG=2,			// —Å–∏–≥–Ω–∞–ª –¥–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ WRG
B_ac_MFC1=3,		// —Å–∏–≥–Ω–∞–ª –ø–æ—Ç–æ–∫ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì1
B_ac_MFC2=4,		// —Å–∏–≥–Ω–∞–ª –ø–æ—Ç–æ–∫ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì2
B_ac_CVM=5,     	// —Å–∏–≥–Ω–∞–ª –¥–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ CVM

//-------------------- –Ω–æ–º–µ—Ä–∞ –∫–∞–Ω–∞–ª–æ–≤ –º–æ–¥—É–ª—è –ê–£ –ü–õ–ö ----------------------------------
B_au_MFC1=0,    	// —Å–∏–≥–Ω–∞–ª –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì1	
B_au_MFC2=1,    	// —Å–∏–≥–Ω–∞–ª –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì2
B_au_Servo1=2,  	// —Å–∏–≥–Ω–∞–ª –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–¥–≤–∏–≥–∞—Ç–µ–ª—è –∑–∞—Å–ª–æ–Ω–∫–∏
B_au_Servo2=3,  	// —Å–∏–≥–Ω–∞–ª –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–¥–≤–∏–≥–∞—Ç–µ–ª—è –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è

//-------------------- –Ω–æ–º–µ—Ä–∞ –∫–∞–Ω–∞–ª–æ–≤ –º–æ–¥—É–ª—è –î–ö –ü–õ–ö ----------------------------------
B_dc_Alarm_TIC=0, 	// —Å–∏–≥–Ω–∞–ª –æ—à–∏–±–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ TIC
				
//-------------------- –Ω–æ–º–µ—Ä–∞ –∫–∞–Ω–∞–ª–æ–≤ –º–æ–¥—É–ª—è –î–£ –ü–õ–ö ----------------------------------
B_du_FVN_on=0,  	// —Å–∏–≥–Ω–∞–ª –≤–∫–ª—é—á–∏—Ç—å –§–í–ù
B_du_TMN_on=1,		// —Å–∏–≥–Ω–∞–ª –≤–∫–ª—é—á–∏—Ç—å –¢–ú–ù
B_du_VE_1_on=5,		// —Å–∏–≥–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω ‚Ññ1
B_du_VE_2_on=6,		// —Å–∏–≥–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω ‚Ññ2
B_du_VE_3_on=7,		// —Å–∏–≥–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω ‚Ññ3
B_du_VE_4_on=8,		// —Å–∏–≥–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω ‚Ññ4
B_du_VE_5_on=9, 	// —Å–∏–≥–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω ‚Ññ5
B_du_VE_6_on=10,	// —Å–∏–≥–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω ‚Ññ6
B_du_SMC_reset=12,	// —Å–∏–≥–Ω–∞–ª reset –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –®–î
			
//-------------------- –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –ê–ö -----------------------------------------
ac_APG,				//	–î–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ APG			
ac_WRG,				//	–î–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ WRG
ac_CVM,         	//	–î–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ CVM
ac_MFC1,			//	–ø–æ—Ç–æ–∫ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì1
ac_MFC2,			//	–ø–æ—Ç–æ–∫ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì2
					
//-------------------- –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –ê–£ -----------------------------------------
au_MFC1=0,			// –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì1
au_MFC2=0,			// –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì2
au_prev_MFC2=0,		// –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ au_MFC2 
au_Shd_speed=0,		// —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è –®–î
au_Shd_accel=0,		// —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è –®–î
au_Servo1=0,		// –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–¥–≤–∏–≥–∞—Ç–µ–ª—è –∑–∞—Å–ª–æ–Ω–∫–∏
au_Servo2=0;		// –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–¥–≤–∏–≥–∞—Ç–µ–ª—è –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è

//==========–ú–∞—Å–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è======================================
//----------–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–±–∏—Ç–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏--------------------------
unsigned int
mask_on[16]=
{0x1,		//–∫–∞–Ω–∞–ª 0	0000 0000 0000 0001
 0x2,		//–∫–∞–Ω–∞–ª 1	0000 0000 0000 0010
 0x4,		//–∫–∞–Ω–∞–ª 2	0000 0000 0000 0100
 0x8,		//–∫–∞–Ω–∞–ª 3	0000 0000 0000 1000
 0x10,		//–∫–∞–Ω–∞–ª 4	0000 0000 0001 0000
 0x20,		//–∫–∞–Ω–∞–ª 5	0000 0000 0010 0000
 0x40,		//–∫–∞–Ω–∞–ª 6	0000 0000 0100 0000
 0x80,		//–∫–∞–Ω–∞–ª 7	0000 0000 1000 0000
 0x100,		//–∫–∞–Ω–∞–ª 8	0000 0001 0000 0000
 0x200,		//–∫–∞–Ω–∞–ª 9	0000 0010 0000 0000
 0x400,	    //–∫–∞–Ω–∞–ª 10	0000 0100 0000 0000
 0x800,	    //–∫–∞–Ω–∞–ª 11	0000 1000 0000 0000
 0x1000,	//–∫–∞–Ω–∞–ª 12	0001 0000 0000 0000
 0x2000,	//–∫–∞–Ω–∞–ª 13	0010 0000 0000 0000
 0x4000,	//–∫–∞–Ω–∞–ª 14	0100 0000 0000 0000
 0x8000,	//–∫–∞–Ω–∞–ª 15	1000 0000 0000 0000
 },
 mask_off[16]=
{0xfffe,	//–∫–∞–Ω–∞–ª 0	1111 1111 1111 1110
 0xfffd,	//–∫–∞–Ω–∞–ª 1	1111 1111 1111 1101
 0xfffb,	//–∫–∞–Ω–∞–ª 2	1111 1111 1111 1011
 0xfff7,	//–∫–∞–Ω–∞–ª 3	1111 1111 1111 0111
 0xffef,	//–∫–∞–Ω–∞–ª 4	1111 1111 1110 1111
 0xffdf,	//–∫–∞–Ω–∞–ª 5	1111 1111 1101 1111
 0xffbf,	//–∫–∞–Ω–∞–ª 6	1111 1111 1011 1111
 0xff7f,	//–∫–∞–Ω–∞–ª 7	1111 1111 0111 1111
 0xfeff,	//–∫–∞–Ω–∞–ª 8	1111 1110 1111 1111
 0xfdff,	//–∫–∞–Ω–∞–ª 9 	1111 1101 1111 1111
 0xfbff,	//–∫–∞–Ω–∞–ª 10	1111 1011 1111 1111
 0xf7ff,	//–∫–∞–Ω–∞–ª 11	1111 0111 1111 1111
 0xefff,	//–∫–∞–Ω–∞–ª 12	1110 1111 1111 1111
 0xdfff,	//–∫–∞–Ω–∞–ª 13	1101 1111 1111 1111
 0xbfff,	//–∫–∞–Ω–∞–ª 14	1011 1111 1111 1111
 0x7fff,	//–∫–∞–Ω–∞–ª 15	0111 1111 1111 1111
 };
					
//------------------- –≤—Å–ø–æ–º–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ -------------------------------------
unsigned int					
vsp_array[8],		//–≤—Å–ø–æ–º–∞–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥—É–ª—è–º–∏ –ê–£ –∏ –ê–ö
v_ac,  	  			//–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ –ê–ö
v_mask,   			//–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –º–∞—Å–∫–∞
ac_contr;			//–¥–ª—è –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
unsigned long
vsp_long;			//–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–µ –¥–ª–∏–Ω–Ω–æ–µ

//------------------- –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–∞–∫—É—É–º–Ω–æ–π –æ—Ç–∫–∞—á–∫–∏ ------------------------------------
unsigned int		
//APG_st_TMN=1600, 	//–î–∞–≤–ª–µ–Ω–∏–µ APG —Ç—Ä–µ–±—É–µ–º–æ–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TMN –≤ –¥–∏—Å–∫—Ä–µ—Ç–∞—Ö
WRG_st_TMN=2720,    //–î–∞–≤–ª–µ–Ω–∏–µ WRG —Ç—Ä–µ–±—É–µ–º–æ–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TMN –≤ –¥–∏—Å–∫—Ä–µ—Ç–∞—Ö
Min_TMN_Time=300,   //–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –§–í –æ—Ç–∫–∞—á–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –¢–ú–ù
P_WRG_B=2735;		//–î–∞–≤–ª–µ–Ω–∏–µ WRG –ø–æ—Å–ª–µ –æ—Ç–∫–∞—á–∫–∏,
					//—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É—é—â–µ–µ –æ –ø–ª–æ—Ö–æ–º –≤–∞–∫—É—É–º–µ –≤ –∫–∞–º–µ—Ä–µ –≤ –¥–∏—Å–∫—Ä–µ—Ç–∞—Ö

//----------------------- —Ñ–ª–∞–≥–∏ 1/0	--------------------------------------------------
unsigned int 			//—Ñ–ª–∞–≥–∏ 1/0
auto_vacuum_start=0,	//–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –í–í –æ—Ç–∫–∞—á–∫—É?
auto_produv_start=0,    //–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥—É–≤–∞—Ç—å –≥–∞–∑–æ–≤—É—é –ª–∏–Ω–∏—é?
produv_state=0,         //–ø—Ä–æ–¥—É–≤ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω?
SHd_state=0;       		//–ø–æ–ª–æ–∂–µ–Ω–∏–µ –®–î –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ?

//------------------- —Å—á–µ—Ç—á–∏–∫–∏ -------------------------------------------------------
unsigned int
n1vacuum=0,     	//—Å—á–µ—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ 1 —ç—Ç–∞–ø–∞ –æ—Ç–∫–∞—á–∫–∏
n1produv=0;			//—Å—á–µ—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
unsigned char
n_vacuum=1;			//—Ç–µ–∫—É—â–∏–π —ç—Ç–∞–ø –æ—Ç–∫–∞—á–∫–∏

//------------------- –ø—Ä–æ—á–µ–µ ---------------------------------------------------------
unsigned int
smb_to_send=0,  	//–∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç 1
SHd_position=0, 	//—Ç–µ–∫—É—â–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –®–î –≤ —à–∞–≥–∞—Ö –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ 0 –ø–æ–ª–æ–∂–µ–Ω–∏—è
Shd_enable_flag =0, //—Ñ–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–æ–∫–∞ –æ–±–º–æ—Ç–æ–∫ –¥–≤–∏–≥–∞—Ç–µ–ª—è.
produv_time=300;	//–≤—Ä–µ–º—è –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏

//------------------- –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å COM-–ø–æ—Ä—Ç–æ–º -----------------------------
char
text_to_send[100],	//–±—É—Ñ–µ—Ä —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
str[5];				//–±—É—Ñ–µ—Ä –¥–ª—è –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ–π –∑–∞–ø–∏—Å–∏ —á–∏—Å–µ–ª

//---------------------------------------- —à–∞–±–ª–æ–Ω—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∫–æ–º–∞–Ω–¥ --------
//---------------------------------------- –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç 1 ------------- 
char
start_left[13]="<LM>DL>SS0>AL",			
start_right[13]="<LM>DR>SS0>AL",
step_left[15]="<LM>DL>SD100>MV",
step_right[15]="<LM>DR>SD100>MV",
move_text[7]=">MV>FS>",
start_text[4]=">FS>",
speed_text[3]=">SD",
mv_text[3]=">MV",
acc_text[4]=">AL-",
scan_init[13]=">RS>LL>SS0>AL",
scan_speed[7]=">SD0>MV",
scan_start[15]=">RS>JP5>JP2>FS>",
<<<<<<< Updated upstream
home_text[18]="<LM>DR>SD100>HM>MV",
home_first[33]="<LM>DR>SD100>HM>DL>MV120>DR>HM>MV",
home_command[34]="<LM>DR>SD100>HM>DL>MV120>DR>HM>FS>";
=======
home_text[18]="<LM>DR>SD100>HM>MV";
>>>>>>> Stashed changes

//---------------------------------------- –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—É–ª—å—Ç–æ–≤–æ–π –ø–µ—Ç–ª–∏ ------------
enum {ACTIV, PASSIV} dispetcher;		// –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á (–≤–∫–ª./–≤—ã–∫–ª.)
enum {PRIORY, DONUT} queue;				// –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á:
										// (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É / –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
										

//---------------------------------------- —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø "–ø—Ä–æ—Ü–µ—Å—Å,–∫–≤–∞–Ω—Ç"------------
typedef struct {
	int tm;						//–∏–Ω–¥–µ–∫—Å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞
	enum {STOP, START} stt;		//—Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞:STOP-–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω,
				}				//START - –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
typ_sq;          				

//-------------------- –∫–≤–∞–Ω—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –æ–±—Å–ª—É–∂–∏–≤–∞–µ–º—ã—Ö –≤ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–µ –∑–∞–¥–∞—á ------------
typ_sq
q_vacuum_start,		// –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞ –≤–∞–∫—É—É–º–Ω–æ–π –æ—Ç–∫–∞—á–∫–∏
q_vacuum_stop,	    // –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–∞ –≤–∞–∫—É—É–º–Ω–æ–π –æ—Ç–∫–∞—á–∫–∏
q_napusk_start,		// –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è
					// —á–µ—Ä–µ–∑ –†–†–ì –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
q_produv_start,		// –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
q_com_tx,			// –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
q_SMC_reset;		// –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∞—á–∏ –∏ —Å–Ω—è—Ç–∏—è —Å–∏–≥–Ω–∞–ª–∞ —Å–±—Ä–æ—Å –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –®–î

//=============== –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–Ω–∞–ª–∞–º–∏ –º–æ–¥—É–ª–µ–π –ü–õ–ö ==================================

//--------------------------------–ê–Ω–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å-----------------------------------------------------
unsigned int a_cntrl(int slot_ac, int n_kanal)	//–≤–≤–æ–¥–∏–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –∏ –Ω–æ–º–µ—Ä –∫–∞–Ω–∞–ª–∞
{
	Get5017H_P1(slot_ac,n_kanal,&ac_contr);		//–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ü–õ–ö 
	ac_contr=ac_contr&0x0FFF;					//–º–æ–¥—É–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ 12 –±–∏—Ç–∞—Ö
	return ac_contr;							//–≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–∏—Å–∫—Ä–µ—Ç–∞—Ö
}
//--------------------------------–í–∫–ª—é—á–∏—Ç—å –∫–∞–Ω–∞–ª –î–£-------------------------------------------------------
void du_on(int slot, int n_kanal)				//–≤–≤–æ–¥–∏–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –∏ –Ω–æ–º–µ—Ä –∫–∞–Ω–∞–ª–∞
{
	Get5050(slot,0,AWord,&v_mask);				//—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é v_mask
	v_mask=(v_mask)|(mask_on[n_kanal]);			//–∏–∑–º–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –±–∏—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞ 1 (–≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)
												//(–Ω–æ–º–µ—Ä –±–∏—Ç–∞ —Ä–∞–≤–µ–Ω –Ω–æ–º–µ—Ä—É –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º–æ–≥–æ –∫–∞–Ω–∞–ª–∞)
	Set5050(&v_mask,slot,0,AWord);  			//–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ –ü–õ–ö
}
//--------------------------------–í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–Ω–∞–ª –î–£------------------------------------------------------
void du_off(int slot, int n_kanal)				//–≤–≤–æ–¥–∏–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –∏ –Ω–æ–º–µ—Ä –∫–∞–Ω–∞–ª–∞
{
	Get5050(slot,0,AWord,&v_mask);				//—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é v_mask
	v_mask=(v_mask)&(mask_off[n_kanal]);		//–∏–∑–º–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –±–∏—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞ 0 (–Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)
												//(–Ω–æ–º–µ—Ä –±–∏—Ç–∞ —Ä–∞–≤–µ–Ω –Ω–æ–º–µ—Ä—É –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º–æ–≥–æ –∫–∞–Ω–∞–ª–∞)
	Set5050(&v_mask,slot,0,AWord);  			//–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ –ü–õ–ö
}
//--------------------------------–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–∞–ª –î–£--------------------------------------------------
void du_inv(int slot, int n_kanal)				//–≤–≤–æ–¥–∏–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –∏ –Ω–æ–º–µ—Ä –∫–∞–Ω–∞–ª–∞
{
	Get5050(slot,0,AWord,&v_mask);				//—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é v_mask
	if ((v_mask&mask_on[n_kanal])==0)			//–µ—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∏—Ç–∞ = 0,
		v_mask=(v_mask)|(mask_on[n_kanal]);		//—Ç–æ –º–µ–Ω—è–µ–º –Ω–∞ 1
	else										//(–Ω–æ–º–µ—Ä –±–∏—Ç–∞ —Ä–∞–≤–µ–Ω –Ω–æ–º–µ—Ä—É –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º–æ–≥–æ –∫–∞–Ω–∞–ª–∞)
		v_mask=(v_mask)&(mask_off[n_kanal]);	//–∏–Ω–∞—á–µ –º–µ–Ω—è–µ–º –Ω–∞ 0
	   
	Set5050(&v_mask,slot,0,AWord);				//–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ –ü–õ–ö
}
//--------------------------------–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–Ω–∞–ª –î–ö------------------------------------------------------
int dc(int slot, int n_kanal)					//–≤–≤–æ–¥–∏–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –∏ –Ω–æ–º–µ—Ä –∫–∞–Ω–∞–ª–∞
{								
	Get5050(slot,0,AWord,&v_mask);				//—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é v_mask
	return v_mask&mask_on[n_kanal];				//–≤–æ–∑–≤—Ä–∞—â–∞–µ–º 0, –µ—Å–ª–∏ –∫–∞–Ω–∞–ª –∑–∞–º–∫–Ω—É—Ç –∏–ª–∏ –≤ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ
}												//–∏ –Ω–µ 0, –µ—Å–ª–∏ —Ä–∞–∑–æ–º–∫–Ω—É—Ç –∏–ª–∏ –≤ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ

//=======================–í—Å–ø–æ–º–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å COM-–ø–æ—Ä—Ç–æ–º======================

//--------------------------------–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–ª–∏—á–µ—Å–≤–æ –∑–Ω–∞–∫–æ–≤ –≤ —á–∏—Å–ª–µ-------------------------------------
int smb_counter(unsigned int chislo)				//–≤–≤–æ–¥–∏–º —á–∏—Å–ª–æ
{
	int kolvo=1;									//—Å—á–µ—Ç—á–∏–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–Ω–∞–∫–æ–≤
	while (chislo=chislo/10)   						//—É–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å —á–∏—Å–ª–∞ –Ω–∞ 1 –¥–æ —Ç–µ—Ö –ø–æ—Ä,
	kolvo++;										//–ø–æ–∫–∞ –æ–Ω–æ –Ω–µ —Å—Ç–∞–Ω–µ—Ç —Ä–∞–≤–Ω–æ 0
	return kolvo;									//–≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–≤
}
//--------------------------------–ó–∞–ø–∏—Å–∞—Ç—å –≤ –±—É—Ñ–µ—Ä —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ COM-–ø–æ—Ä—Ç—É —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ---
int smb_writer(int str_length, unsigned int chislo)	// –≤–≤–æ–¥–∏–º —Ç–µ–∫—É—â–µ–µ –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –≤ –±—É—Ñ–µ—Ä–µ
{													// –∏ —á–∏—Å–ª–æ –¥–ª—è –∑–∞–ø–∏—Å–∏
	int i, smb_count;									
    smb_count=smb_counter(chislo); 					// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –≤ —á–∏—Å–ª–µ
	itoa(chislo,str,10);        					// –ø–µ—Ä–µ–≤–æ–¥–∏–º —á–∏—Å–ª–æ –≤ —Å–∏–º–≤–æ–ª—ã –≤ —Å—Ç—Ä–æ–∫—É str
	for (i=0;i<smb_count;i++)							
	text_to_send[str_length+i]=str[i];				// –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —á–∏—Å–ª–æ –≤ –±—É—Ñ–µ—Ä —Å–∏–º–≤–æ–ª–æ–≤
	return (str_length+smb_count);					// –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤
}
//--------------------------------–ó–∞–ø–∏—Å–∞—Ç—å –≤ –±—É—Ñ–µ—Ä —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ COM-–ø–æ—Ä—Ç—É —à–∞–±–ª–æ–Ω —Å–∏–º–≤–æ–ª–æ–≤-----
void pattern_writer(int str_length, int smb_count,char pattern[])
{
	int i;											
	for (i=0;i<smb_count;i++)						
		text_to_send[str_length+i]=pattern[i];		// –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º —à–∞–±–ª–æ–Ω –≤ –±—É—Ñ–µ—Ä —Å–∏–º–≤–æ–ª–æ–≤
}

//-------------------------------- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥—ã #1000 –∞–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç–∫–∞—á–∫–∏ ---------
void Avarya(void)
{
	vsp_long=0;
	R_Quants=R_Quants & mask_off[5];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì1)	
	Set5024(&vsp_long,slot_au,B_au_MFC1);				//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì1 = 0
	R_Quants=R_Quants & mask_off[6];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 6 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì2)
	Set5024(&vsp_long,slot_au,B_au_MFC2);				//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì2 = 0
	
	du_off(slot_du,B_du_TMN_on);						//–≤—ã–∫–ª—é—á–∞–µ–º –¢–ú–ù
	du_on(slot_du,B_du_FVN_on);							//–≤–∫–ª—é—á–∞–µ–º –§–í–ù
		
	q_vacuum_stop.stt=START;							//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–∫–∞—á–∫–∏
	q_vacuum_start.stt=STOP;							//–¥–µ–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏
	q_produv_start.stt=STOP;							//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞
	R_Quants=R_Quants & mask_off[2];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 2 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–í–í –æ—Ç–∫–∞—á–∫–∞)
	R_Quants=R_Quants | mask_on[4];						//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù)
	R_Quants=R_Quants & mask_off[3];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 3 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ä–∞–∑–≥–æ–Ω –¢–ú–ù)
	R_Quants=R_Quants & mask_off[7];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 7 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø—Ä–æ–¥—É–≤)
	auto_vacuum_start=1;								//–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏

	Get5050(slot_du,0,AWord,&v_mask);					//–°—á–∏—Ç—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥—É–ª—è –î–£
	v_mask=(v_mask)&(0xF81F);							//–ø–µ—Ä–µ–≤–æ–¥–∏–º –∫–∞–Ω–∞–ª—ã 5-10 –≤ –Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å: 1111 1000 0001 1111
	Set5050(&v_mask,slot_du,0,AWord);					//–∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–ø–∞–Ω—ã –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
}

//=============================== –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ ===========================================

void server_update(void)
{
	int i, strlen;
	double accel_distance;

//------------------------------- –°—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∫–∞–∑–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π –ü–õ–ö ----------------------------------------	
	for (i=0;i<8;i++)									
		{												
		Get5017H_P1(slot_ac,i,&ac_contr);				//–°—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∫–∞–∑–∞–Ω–∏—è –º–æ–¥—É–ª—è –ê–ö
		vsp_array[i]=ac_contr&0x0FFF;					//–≤–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
		}

	Get5050(slot_dc,0,AWord,&v_mask);					//–°—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∫–∞–∑–∞–Ω–∏—è –º–æ–¥—É–ª—è –î–ö
	rg_dc=v_mask;										//–≤ —Ä–µ–≥–∏—Å—Ç—Ä –î–ö
	
	Get5050(slot_du,0,AWord,&v_mask);					//–°—á–∏—Ç—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥—É–ª—è –î–£
	rg_du=v_mask;										//–≤ —Ä–µ–≥–∏—Å—Ç—Ä –î–£

//------------------------------- –û–±–Ω–æ–≤–ª—è–µ–º/—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–∞–º—è—Ç—å –æ–±–º–µ–Ω–∞ --------------------------------------	
	disable();											//–ó–∞–ø—Ä–µ—â–∞–µ–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è–ª–∞—Å—å –ø–∞–º—è—Ç—å –æ–±–º–µ–Ω–∞
	Share_Mem[0]=R_Quants;								//–æ–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
	Share_Mem[1]=vsp_array[0]; 							//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞–Ω–∏—è –ê–ö
	Share_Mem[2]=vsp_array[1];
	Share_Mem[3]=vsp_array[2];
	Share_Mem[4]=vsp_array[3];
	Share_Mem[5]=vsp_array[4];
	Share_Mem[6]=vsp_array[5];
	Share_Mem[7]=vsp_array[6];
	Share_Mem[8]=vsp_array[7];
	ac_APG=Share_Mem[2];								//–ø–æ–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤ –¥–∞–≤–ª–µ–Ω–∏—è –∑–∞–Ω–æ—Å–∏–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
	ac_WRG=Share_Mem[3];								//–¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏
	Share_Mem[13]=com_rx();								//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –æ—á–µ—Ä–µ–¥–Ω–æ–π –ø—Ä–∏–Ω—è—Ç—ã–π —Å–∏–º–≤–æ–ª —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
	Share_Mem[15]=rg_dc;								//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞–Ω–∏—è –î–ö
	Share_Mem[17]=err_code;								//–æ–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫
	Share_Mem[20]=0;									//–æ–±–Ω—É–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ü–∏–∫–ª–∞ –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è
	command=Share_Mem[21];								//—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–æ–¥ –∫–æ–º–∞–Ω–¥—ã –∫–ª–∏–µ–Ω—Ç–∞
	dop_command=Share_Mem[22];							//—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–º–∞–Ω–¥—ã
	Share_Mem[21]=0;									//–æ–±–Ω—É–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä (–∫–æ–º–∞–Ω–¥–∞ —Å—á–∏—Ç–∞–Ω–∞)
	Share_Mem[22]=0;									//–æ–±–Ω—É–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä (–ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–º–∞–Ω–¥—ã —Å—á–∏—Ç–∞–Ω)
	au_MFC1=Share_Mem[23];								//—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–∞–∫–æ–π –ø–æ—Ç–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–¥–∞–Ω–∏—è –†–†–ì1
	au_MFC2=Share_Mem[24];								//—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–∞–∫–æ–π –ø–æ—Ç–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–¥–∞–Ω–∏—è –†–†–ì2
	au_Shd_speed=Share_Mem[25];           				//—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–∞–∫—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –®–î
	au_Shd_accel=Share_Mem[26];           				//—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–∞–∫–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –®–î
	Share_Mem[27]=rg_du;     							//–æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –î–£
	Share_Mem[28]=au_Servo1;         					//–æ–±–Ω–æ–≤–ª—è–µ–º –≤ –∫–∞–∫–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –∑–∞—Å–ª–æ–Ω–∫–∏
	Share_Mem[29]=au_Servo2;          					//–æ–±–Ω–æ–≤–ª—è–µ–º –≤ –∫–∞–∫–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
	enable();											//–†–∞–∑—Ä–µ—à–∞–µ–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
	
//------------------------------- –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∫–ª–∏–µ–Ω—Ç–∞ ----------------------------------------------	
	if (command!=0)										//–µ—Å–ª–∏ –±—ã–ª–∞ –ø–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
	{
	switch (command)
	{
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ1 –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–∫–∞—á–∫—É -------------------------------------------
	case 1:
	if (dop_command==1)									//–∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –§–í–ù
		{
		q_vacuum_start.stt=START;						//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏
		R_Quants=R_Quants | mask_on[1]; 				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 1 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–§–í –æ—Ç–∫–∞—á–∫–∞)
		n1vacuum=0;										//–æ–±–Ω—É–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ –§–í –æ—Ç–∫–∞—á–∫–∏
		du_on(slot_du,B_du_FVN_on);						//–∑–∞–ø—É—Å–∫–∞–µ–º –§–í–ù
		if ((ac_APG<550)||(ac_APG>4000)) 				//–µ—Å–ª–∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–∞ APG –Ω–µ –≤ —ç—Ç–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ, —Ç–æ
			err_code=err_code | mask_on[1]; 			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 1 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫ "–æ—à–∏–±–∫–∞ –≤–∞–∫—É—É–º–µ—Ç—Ä–∞ APG"
		else err_code=err_code & mask_off[1]; 			//–∏–Ω–∞—á–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 1 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫
		}
		
	if (dop_command==2)									//–∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç –¢–ú–ù				
		{
		if ((n1vacuum>Min_TMN_Time)&&(ac_WRG<WRG_st_TMN))	//–µ—Å–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –§–í –æ—Ç–∫–∞—á–∫–∏, –¥–∞–≤–ª–µ–Ω–∏–µ WRG
		if (q_produv_start.stt==STOP)						//–î–æ—Å—Ç–∏–≥–ª–æ –¥–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ –¢–ú–ù –∏ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞
															//–≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
//		if (ac_APG<APG_st_TMN)     							//–µ—Å–ª–∏ –¥–∞–≤–ª–µ–Ω–∏–µ APG –¥–æ—Å—Ç–∏–≥–ª–æ –¥–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—Ç–∞ –¢–ú–ù
			{
			n_vacuum=2;    								//—Ç–µ–∫—É—â–∏–π —ç—Ç–∞–ø –æ—Ç–∫–∞—á–∫–∏ - 2
			du_on(slot_du,B_du_TMN_on);  				//–∑–∞–ø—É—Å–∫–∞–µ–º –¢–ú–ù
			q_vacuum_stop.stt=STOP;						//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–∞ –æ—Ç–∫–∞—á–∫–∏
			q_vacuum_start.stt=START;					//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏
			R_Quants=R_Quants | mask_on[2]; 			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 2 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–í–í –æ—Ç–∫–∞—á–∫–∞)
			R_Quants=R_Quants | mask_on[3]; 			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 3 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ä–∞–∑–≥–æ–Ω –¢–ú–ù)
			R_Quants=R_Quants & mask_off[4];			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù)
			err_code=err_code & mask_off[2]; 			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 2 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫ 
			}
		else
			err_code=err_code | mask_on[2]; 			//–∏–Ω–∞—á–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 2 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫ "–¥–∞–≤–ª–µ–Ω–∏–µ –≤—ã—à–µ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ"
		}
	break;

//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ2 –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–∫–∞—á–∫—É ------------------------------------------
	case 2:		
	if (dop_command==1)									//–∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å–∏—Ç –≤—ã–∫–ª—é—á–∏—Ç—å –§–í–ù
		{
		if ((R_Quants & mask_on[2])==0)					//–µ—Å–ª–∏ 2 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ = 0 (–í–í –æ—Ç–∫–∞—á–∫–∞)
		if ((R_Quants & mask_on[4])==0)					//–µ—Å–ª–∏ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ = 0 (—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù)
			{
			du_off(slot_du,B_du_FVN_on);				//–≤—ã–∫–ª—é—á–∞–µ–º –§–í–ù
			q_vacuum_stop.stt=STOP;						//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–∞ –æ—Ç–∫–∞—á–∫–∏
			R_Quants=R_Quants & mask_off[1];			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 1 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–§–í –æ—Ç–∫–∞—á–∫–∞)
			du_off(slot_du,B_du_VE_2_on);				//–∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–ø–∞–Ω—ã 2,3,5,6
			du_off(slot_du,B_du_VE_3_on);
			du_off(slot_du,B_du_VE_5_on);
			du_off(slot_du,B_du_VE_6_on);

			if (q_produv_start.stt==START)	 			//–µ—Å–ª–∏ –±—ã–ª –∑–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
				{
				q_produv_start.stt=STOP;				//–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
				R_Quants=R_Quants & mask_off[7];		//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 1 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø—Ä–æ–¥—É–≤)
				R_Quants=R_Quants & mask_off[5]; 		//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì1) 
				vsp_long=0;                				
				Set5024(&vsp_long,slot_au,B_au_MFC1);	//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì1 = 0
				R_Quants=R_Quants & mask_off[6]; 		//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 6 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì2) 
				vsp_long=0;               
				Set5024(&vsp_long,slot_au,B_au_MFC2);	//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì2 = 0
				}
			}
		}
		
	if (dop_command==2)									//–∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å–∏—Ç –≤—ã–∫–ª—é—á–∏—Ç—å –¢–ú–ù
		{
		du_off(slot_du,B_du_TMN_on);					//–≤—ã–∫–ª—é—á–∞–µ–º –¢–ú–ù
		q_vacuum_stop.stt=START;						//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–∞ –æ—Ç–∫–∞—á–∫–∏
		q_vacuum_start.stt=STOP;						//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏
		R_Quants=R_Quants & mask_off[2];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 2 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–í–í –æ—Ç–∫–∞—á–∫–∞)
		R_Quants=R_Quants & mask_off[3];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 3 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ä–∞–∑–æ–Ω –¢–ú–ù)
		R_Quants=R_Quants | mask_on[4];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù)
		du_off(slot_du,B_du_VE_2_on);					//–∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–ø–∞–Ω—ã 2,3,5,6
		du_off(slot_du,B_du_VE_3_on);
		du_off(slot_du,B_du_VE_5_on);
		du_off(slot_du,B_du_VE_6_on);
		}
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ3 –Ω–∞–ø—É—Å–∫–∞—Ç—å –≥–∞–∑ —á–µ—Ä–µ–∑ –†–†–ì1 ------------------------------------
	case 3:		
	if (au_MFC1>0)										//–µ—Å–ª–∏ –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –±–æ–ª—à–µ –Ω—É–ª—è
		{
		R_Quants=R_Quants | mask_on[5]; 				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì1)
		vsp_long=au_MFC1;               				
		Set5024(&vsp_long,slot_au,B_au_MFC1);			//–∑–∞–¥–∞–µ–º –ø–æ—Ç–æ–∫–∞ –†–†–ì1 = au_MFC1
		}
	else												//–∏–Ω–∞—á–µ
		{
		R_Quants=R_Quants & mask_off[5];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì1)
		vsp_long=au_MFC1;
		Set5024(&vsp_long,slot_au,B_au_MFC1);			//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì1 = 0
		}
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ4 –Ω–∞–ø—É—Å–∫–∞—Ç—å –≥–∞–∑ —á–µ—Ä–µ–∑ –†–†–ì2 ------------------------------------
	case 4:
	if (au_MFC2>0)										//–µ—Å–ª–∏ –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –±–æ–ª—à–µ –Ω—É–ª—è
		{
		R_Quants=R_Quants | mask_on[6]; 				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 6 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì2)
		q_napusk_start.stt=START;						//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
		}
	else												//–∏–Ω–∞—á–µ
		{												
		R_Quants=R_Quants & mask_off[6];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 6 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì2)
		vsp_long=au_MFC2;
		Set5024(&vsp_long,slot_au,B_au_MFC2);			//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì2 = 0
		au_prev_MFC2=0;									//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é "–ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞" = 0
		}
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ5 –æ—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω --------------------------------------
	case 5:
	du_inv(slot_du,dop_command+4);						//–ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞–ø–∞–Ω–∞ (‚Ññ = dop_command)
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ6 –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ –∑–∞—Å–ª–æ–Ω–∫–∏ --------------------
	case 6:
	au_Servo1=dop_command;								//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞
	vsp_long=au_Servo1;
	Set5024(&vsp_long,slot_au,B_au_Servo1);				//–∑–∞–¥–∞–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ = au_Servo1
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ7 –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è -------------
    case 7:
	au_Servo2=dop_command;								//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞
	vsp_long=au_Servo2;
	Set5024(&vsp_long,slot_au,B_au_Servo2);				//–∑–∞–¥–∞–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ = au_Servo2
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥—ã ‚Ññ10,20,30,40 –≤–∫–ª./–≤—ã–∫–ª. –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ --------------------------
	case 10:
	auto_vacuum_start=1;								//–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –í–í –æ—Ç–∫–∞—á–∫—É
	break;
	
	case 20:
	auto_vacuum_start=0;								//–ù–ï –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –í–í –æ—Ç–∫–∞—á–∫—É
	break;
	
	case 30:
	auto_produv_start=1;								//–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥—É–≤–∞—Ç—å –≥–∞–∑–æ–≤—É—é –ª–∏–Ω–∏—é
	produv_time=dop_command;
	break;												//–≤–æ –≤—Ä–µ–º—è –§–í –æ—Ç–∫–∞—á–∫–∏
	
	case 40:
	auto_produv_start=0;								//–ù–ï –ø—Ä–æ–¥—É–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–∞–∑–æ–≤—É—é –ª–∏–Ω–∏—é
	break;												//–≤–æ –≤—Ä–µ–º—è –§–í –æ—Ç–∫–∞—á–∫–∏

//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ51 –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç 1 --------------------------	
	case 51:
	com_tx(dop_command);								//–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª, –∫–æ–¥ ASCII –∫–æ—Ç–æ—Ä–æ–≥–æ = dop_command
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ52 –≤—Ä–∞—â–∞—Ç—å –®–î —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é ----------------------------	
	case 52:
	if ((R_Quants & mask_on[8])==0)						//–µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ—Ü–µ—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		{
		R_Quants=R_Quants | mask_on[8];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 8 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤)
		q_com_tx.stt=START;								//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		if (dop_command==1)								//–µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–≤–æ—Ä–æ—Ç –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ
			pattern_writer(0,13,start_right);			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 13 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DR>SS0>AL —Å –Ω—É–ª–µ–≤–æ–≥–æ
		if (dop_command==2)								//–µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–≤–æ—Ä–æ—Ç –ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–∏
			pattern_writer(0,13,start_left);			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 13 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DL>SS0>AL —Å –Ω—É–ª–µ–≤–æ–≥–æ
		strlen=smb_writer(13,au_Shd_accel);				//–¥–æ–±–∞–≤–ª—è–µ–º –≤ –±—É—Ñ–µ—Ä –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
		pattern_writer(strlen,3,speed_text);			//–¥–æ–±–∞–≤–ª—è–µ–º >SD
		strlen=smb_writer(3+strlen,au_Shd_speed);		//–¥–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
		pattern_writer(strlen,7,move_text);				//–¥–æ–±–∞–≤–ª—è–µ–º >MV>FS>
		smb_to_send=7+strlen;							//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏—Ç–æ–≥–æ–≤—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
		SHd_state=FALSE;								//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º, —á—Ç–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –®–î –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ
		}		
	break;

//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ53 –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –®–î ----------------------------------------------
	case 53:
	if ((R_Quants & mask_on[8])==0)						//–µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ—Ü–µ—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		{
		du_on(slot_du,B_du_SMC_reset);					//–ø–æ–¥–∞–µ–º —Å–∏–≥–Ω–∞–ª –Ω–∞ –≤—Ö–æ–¥ reset –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –®–î
		q_SMC_reset.stt=START;							//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ —Å–±—Ä–æ—Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –®–î
		Timer_Reset(q_SMC_reset.tm);					//–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞
		SHd_state=FALSE;								//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º, —á—Ç–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –®–î –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ
		}
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ54 –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –®–î –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ----------------------	
	case 54:
	if ((R_Quants & mask_on[8])==0)						//–µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ—Ü–µ—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		{
		R_Quants=R_Quants | mask_on[8];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 8 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤)
		q_com_tx.stt=START;								//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		if (SHd_state==false)							//–µ—Å–ª–∏ –Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–æ —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –®–î
			{
			pattern_writer(0,18,home_text);				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 18 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DR>SD100>HM>MV —Å –Ω—É–ª–µ–≤–æ–≥–æ
			strlen=smb_writer(18,dop_command);          //–¥–æ–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ —à–∞–≥–æ–≤ (—á–∏—Å–ª–æ —à–∞–≥–æ–≤ = –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ)
			pattern_writer(strlen,4,start_text);		//–¥–æ–±–∞–≤–ª—è–µ–º >FS>
			smb_to_send=4+strlen;						//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏—Ç–æ–≥–æ–≤—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
			SHd_position=dop_command;					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –®–î
			SHd_state=TRUE;								//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º, —á—Ç–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –®–î –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ
			}
		else											//–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –®–î
			{
			pattern_writer(0,15,step_right);			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 15 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DR>SD100>MV —Å –Ω—É–ª–µ–≤–æ–≥–æ
			dop_command=(dop_command+800-SHd_position)%800;	//—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
			strlen=smb_writer(15,dop_command);          //–¥–æ–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ —à–∞–≥–æ–≤
			pattern_writer(strlen,4,start_text);		//–¥–æ–±–∞–≤–ª—è–µ–º >FS>
			smb_to_send=4+strlen;						//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏—Ç–æ–≥–æ–≤—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
			SHd_position=(SHd_position+dop_command)%800;	//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –®–î
			}
		}
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ55 –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –®–î –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ --------------------------
	case 55:
	if ((R_Quants & mask_on[8])==0)						//–µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ—Ü–µ—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		{
		R_Quants=R_Quants | mask_on[8];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 8 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤)
		q_com_tx.stt=START;								//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		pattern_writer(0,15,step_right);				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 15 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DR>SD100>MV —Å –Ω—É–ª–µ–≤–æ–≥–æ
		strlen=smb_writer(15,dop_command);          	//–¥–æ–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ —à–∞–≥–æ–≤
		pattern_writer(strlen,4,start_text);			//–¥–æ–±–∞–≤–ª—è–µ–º >FS>
		smb_to_send=4+strlen;							//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏—Ç–æ–≥–æ–≤—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
		SHd_position=(SHd_position+dop_command)%800;	//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –®–î
		}
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ56 –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –®–î –ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–∏ ----------------------	
	case 56:
	if ((R_Quants & mask_on[8])==0)						//–µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ—Ü–µ—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		{
		R_Quants=R_Quants | mask_on[8];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 8 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤)
		q_com_tx.stt=START;								//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		pattern_writer(0,15,step_left);					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 15 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DL>SD100>MV —Å –Ω—É–ª–µ–≤–æ–≥–æ
		strlen=smb_writer(15,dop_command);          	//–¥–æ–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ —à–∞–≥–æ–≤
		pattern_writer(strlen,4,start_text);			//–¥–æ–±–∞–≤–ª—è–µ–º >FS>
		smb_to_send=4+strlen;							//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏—Ç–æ–≥–æ–≤—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
		SHd_position=(SHd_position+800-dop_command)%800;	//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –®–î
		}
	break;
	
//------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ57 –∑–∞–¥–∞—Ç—å —Å–∫–∞–Ω–∏—Ä—É—é—â–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –®–î -----------------------------
	case 57:
	if ((R_Quants & mask_on[8])==0)						//–µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ—Ü–µ—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		{
		R_Quants=R_Quants | mask_on[8];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 8 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤)
		q_com_tx.stt=START;								//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		pattern_writer(0,15,step_left);					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 15 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DL>SD100>MV —Å –Ω—É–ª–µ–≤–æ–≥–æ
		strlen=smb_writer(15,dop_command/2);			//–¥–æ–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ —à–∞–≥–æ–≤ —Ä–∞–≤–Ω–æ–µ –ø–æ–ª–æ–≤–∏–Ω–µ –¥–ª–∏–Ω—ã –¥—É–≥–∏
		pattern_writer(strlen,13,scan_init);			//–¥–æ–±–∞–≤–ª—è–µ–º >RS>LL>SS0>AL
	    strlen=smb_writer(13+strlen,au_Shd_accel);		//–¥–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑–≥–æ–Ω–µ
		pattern_writer(strlen,3,speed_text);				//–¥–æ–±–∞–≤–ª—è–µ–º >SD
	    strlen=smb_writer(3+strlen,au_Shd_speed);		//–¥–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
		pattern_writer(strlen,3,mv_text);				//–¥–æ–±–∞–≤–ª—è–µ–º >MV
	    accel_distance=pow(au_Shd_speed,2)/(2*au_Shd_accel);	//—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–ª–∏–Ω—É –¥—É–≥–∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è
	    strlen=smb_writer(3+strlen,((dop_command/2)*2)-ceil(accel_distance));
																//–¥–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è
		pattern_writer(strlen,4,acc_text);				//–¥–æ–±–∞–≤–ª—è–µ–º >AL-
	    strlen=smb_writer(4+strlen,au_Shd_accel);		//–¥–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏–∏
		pattern_writer(strlen,7,scan_speed);			//–¥–æ–±–∞–≤–ª—è–µ–º >SD0>MV
		strlen=smb_writer(7+strlen,ceil(accel_distance));	//–¥–æ–±–∞–≤–ª—è–µ–º –¥–ª–∏–Ω—É –¥—É–≥–∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è
		pattern_writer(strlen,15,scan_start);			//–¥–æ–±–∞–≤–ª—è–µ–º >RS>JP5>JP2>FS>
	    smb_to_send=15+strlen;							//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏—Ç–æ–≥–æ–≤—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
		SHd_state=FALSE;								//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º, —á—Ç–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –®–î –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ
		}
	break;
<<<<<<< Updated upstream
	//--------------------------------- äÆ¨†≠§† ¸58 ØÆ®·Â ≠„´•¢Æ£Æ ØÆ´Æ¶•≠®Ô òÑ-------------------------------
    case 58:
	if ((R_Quants & mask_on[8])==0)						//•·´® ≠• †™‚®¢•≠ Ø‡ÆÊ•· Æ‚Ø‡†¢™® ·®¨¢Æ´Æ¢ Á•‡•ß COM-ØÆ‡‚
		{
		R_Quants=R_Quants | mask_on[8];					//ß†Ø®·Î¢†•¨ 1 ¢ 8 °®‚ ‡•£®·‚‡† ·Æ·‚ÆÔ≠®Ô Ø‡ÆÊ•··Æ¢ (Æ‚Ø‡†¢™† ·®¨¢Æ´Æ¢)
		q_com_tx.stt=START;			                    //†™‚®¢®‡„•¨ Ø‡ÆÊ•·· Æ‚Ø‡†¢™® ·®¨¢Æ´Æ¢ Á•‡•ß COM-ØÆ‡‚
		pattern_writer(0,34,home_command);			//ß†Ø®·Î¢†•¨ ¢ °„‰•‡ 33 ·®¨¢Æ´Æ¢ <LM>DR>SD100>HM>DL>MV120>DR>HM>FS> · ≠„´•¢Æ£Æ
	    smb_to_send=34;						//ß†Ø®·Î¢†•¨ ¢ Ø•‡•¨•≠≠„Ó ®‚Æ£Æ¢„Ó §´®≠„ °„‰•‡†
		SHd_position=0;					    //ß†Ø®·Î¢†•¨ ‚•™„È„Ó ™ÆÆ‡§®≠†‚„ òÑ
		SHd_state=TRUE;								//ß†Ø®·Î¢†•¨, Á‚Æ ØÆ´Æ¶•≠®• òÑ ÆØ‡•§•´•≠Æ	
	    }
	break;
 //------------------------------- äÆ¨†≠§† ¸100 ß†¢•‡Ë•≠®• ‡†°Æ‚Î Ø‡Æ£‡†¨¨Î ------------------------------  	
=======
	
 //------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ100 –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã ------------------------------  	
>>>>>>> Stashed changes
	case 100:
	dispetcher=PASSIV;									//–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–∏–∫–ª–∏—á–Ω–æ—Å—Ç—å –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–¥–∞—á
	break;
	
 //------------------------------- –ö–æ–º–∞–Ω–¥–∞ ‚Ññ1000 –∞–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç–∫–∞—á–∫–∏ -----------------------------	
	case 1000:
	Avarya();											//–≤—ã–ø–æ–ª–Ω—è–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É Avarya
	break;
	}													//–ö–æ–Ω–µ—Ü –¥–µ—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–æ–º–∞–Ω–¥
	}
}

//================================ –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ======================================

//-------------------------------- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ç–∫–∞—á–∫–∏ --------------------------------------------
void vacuum_start(void)
{
	switch (n_vacuum)										//–ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ 3 —ç—Ç–∞–ø–∞:
	{
	case 1:													//—ç—Ç–∞–ø 1: –§–í –æ—Ç–∫–∞—á–∫–∞
		n1vacuum=n1vacuum+1;								//—Å—á–∏—Ç–∞–µ–º –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –§–í –Ω–∞—Å–æ—Å–∞
															//–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–¥—É–≤–∞ 
		if ((n1vacuum>120)&&(auto_produv_start==1))			//–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ 120—Å –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–¥—É–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
		if ((q_produv_start.stt==STOP)&&(produv_state==0))	//–ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ–¥—É–≤ –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏ –Ω–µ –±—ã–ª –∑–∞–≤–µ—Ä—à–µ–Ω
			{
			n1produv=0;										//–æ–±–Ω—É–ª—è–µ–º –≤—Ä–µ–º—è –ø—Ä–æ–¥—É–≤–∞
			q_produv_start.stt=START;						//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
			R_Quants=R_Quants | mask_on[7];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 7 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø—Ä–æ–¥—É–≤)
			du_on(slot_du,B_du_VE_1_on);
			du_on(slot_du,B_du_VE_2_on);					//–æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–ø–∞–Ω—ã 2,3,5,6 –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
			du_on(slot_du,B_du_VE_3_on);
			du_on(slot_du,B_du_VE_4_on);
			du_on(slot_du,B_du_VE_5_on);
			du_on(slot_du,B_du_VE_6_on);
			R_Quants=R_Quants | mask_on[5];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì1)
			vsp_long=5000;
			Set5024(&vsp_long,slot_au,B_au_MFC1);			//–∑–∞–¥–∞–µ–º –ø–æ—Ç–æ–∫–∞ –†–†–ì1 = 5000 –¥–∏—Å–∫—Ä–µ—Ç
			R_Quants=R_Quants | mask_on[6];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 6 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì2)
			vsp_long=5000;
			Set5024(&vsp_long,slot_au,B_au_MFC2);			//–∑–∞–¥–∞–µ–º –ø–æ—Ç–æ–∫–∞ –†–†–ì2 = 5000 –¥–∏—Å–∫—Ä–µ—Ç
			}
															//–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–ø–∞–Ω–æ–≤ –¥–ª—è –æ—Ç–∫–∞—á–∫–∏ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
		if ((n1vacuum==120)&&(auto_vacuum_start==1)&&(auto_produv_start==0))
			{												//–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ 120—Å –∏ –æ—Ç–∫–∞—á–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
			du_on(slot_du,B_du_VE_2_on);					//—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–ø–∞–Ω—ã 2,3,5,6
			du_on(slot_du,B_du_VE_3_on);
			du_on(slot_du,B_du_VE_5_on);
			du_on(slot_du,B_du_VE_6_on);
			}
															//–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –¢–ú–ù
		if ((n1vacuum>Min_TMN_Time)&&(auto_vacuum_start==1))	//–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¢–ú–ù
		if ((q_produv_start.stt==STOP)&&(ac_WRG<WRG_st_TMN))	// –∏ –æ—Ç–∫–∞—á–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
			{													// –∏ –¥–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–æ—Ç–æ—á–Ω–æ –Ω–∏–∑–∫–æ–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¢–ú–ù
			n_vacuum=2;    									//–∏–Ω–∏—Ü–∏–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 2 —ç—Ç–∞–ø
			du_on(slot_du,B_du_TMN_on);						//–∑–∞–ø—É—Å–∫–∞–µ–º –¢–ú–ù
			R_Quants=R_Quants | mask_on[2];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 2 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–í–í –æ—Ç–∫–∞—á–∫–∞)
			R_Quants=R_Quants | mask_on[3];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 3 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ä–∞–∑–≥–æ–Ω –¢–ú–ù)
			R_Quants=R_Quants & mask_off[4];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù)
			}
	break;

	case 2:													//—ç—Ç–∞–ø 2: —Ä–∞–∑–≥–æ–Ω –¢–ú–ù
		if ((a_cntrl(slot_ac,B_ac_TIC)>3600)&&(a_cntrl(slot_ac,B_ac_TIC)<3700))
			{												//–µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è —Ç—É—Ä–±–∏–Ω 100%
			R_Quants=R_Quants & mask_off[3];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 3 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ä–∞–∑–≥–æ–Ω –¢–ú–ù)
			n_vacuum=3;										//–∏–Ω–∏—Ü–∏–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 3 —ç—Ç–∞–ø
			}
	break;
	
	case 3:													//—ç—Ç–∞–ø 3: —Å–ª–µ–∂–µ–Ω–∏–µ –∑–∞ –≤–∞–∫—É—É–º–æ–º
		if (ac_WRG>P_WRG_B)									//–µ—Å–ª–∏ –¥–∞–≤–ª–µ–Ω–∏–µ –æ–ø—É—Å—Ç–∏–ª–æ—Å—å –Ω–∏–∂–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—Ç–º–µ—Ç–∫–∏
			err_code=err_code | mask_on[3];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 3 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫ "–ü–ª–æ—Ö–æ–π –≤–∞–∫—É—É–º"
		else err_code=err_code & mask_off[3];				//–∏–Ω–∞—á–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 3 –±–∏—Ç —Ä–µ–≥—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫
	break;
	}
}

//-------------------------------- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–∫–∞—á–∫–∏ ----------------------------------
void vacuum_stop(void)
{
	switch (n_vacuum)										//–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –æ—Ç–∫–∞—á–∫–∏ –Ω–∞—Ö–æ–¥–∏–º—Å—è
	{
	case 3:													//–µ—Å–ª–∏ –Ω–∞ 3 —ç—Ç–∞–ø–µ
		n_vacuum=2;											//–ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ 2 —ç—Ç–∞–ø
	break;
	
	case 2:													//–µ—Å–ª–∏ –Ω–∞ 2 —ç—Ç–∞–ø–µ: —Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù
		if ((a_cntrl(slot_ac,B_ac_TIC)<10)||(a_cntrl(slot_ac,B_ac_TIC)>4000))
			{												//–µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è —Ç—É—Ä–±–∏–Ω = 0%
			n_vacuum=1;										//–∏–Ω–∏—Ü–∏–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 1 —ç—Ç–∞–ø
			R_Quants=R_Quants & mask_off[4];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –¢–ú–ù)		
			}
	break;
	
	case 1:													//–µ—Å–ª–∏ –Ω–∞ 1 —ç—Ç–∞–ø–µ: –§–í –æ—Ç–∫–∞—á–∫–∞
		if (auto_vacuum_start==1)							//–µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
			{
			du_off(slot_du,B_du_FVN_on);					//–≤—ã–∫–ª—é—á–∞–µ–º –§–í–ù
			q_vacuum_stop.stt=STOP;							//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–∫–∞—á–∫–∏
			R_Quants=R_Quants & mask_off[1];				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 1 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–§–í –æ—Ç–∫–∞—á–∫–∞)
			}
	break;
	}
}
//-------------------------------- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ ------------------------------
void produv_start(void)
{
	n1produv=n1produv+1;									//—Å—á–∏—Ç–∞–µ–º –≤—Ä–µ–º—è –ø—Ä–æ–¥—É–≤–∞ 
	if (n1produv>produv_time)										//–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ 5 –º–∏–Ω
		{
		q_produv_start.stt=STOP;							//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞							
		R_Quants=R_Quants & mask_off[7];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 7 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø—Ä–æ–¥—É–≤)
		R_Quants=R_Quants & mask_off[5];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì1)
		vsp_long=0;
		Set5024(&vsp_long,slot_au,B_au_MFC1);				//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì1 = 0
		R_Quants=R_Quants & mask_off[6];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 6 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –†–†–ì2)
		vsp_long=0;
		Set5024(&vsp_long,slot_au,B_au_MFC2);				//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì2 = 0
		produv_state=1;										//–¥–µ–ª–∞–µ–º –æ—Ç–º–µ—Ç–∫—É —á—Ç–æ –ø—Ä–æ–¥—É–≤ –∑–∞–≤–µ—Ä—à–µ–Ω
		}
}
//-------------------------------- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ —á–µ—Ä–µ–∑ –†–†–ì –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ --------
void napusk_start(void)
{
	if (au_prev_MFC2>au_MFC2)								//–µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—ã–ª–æ –≤—ã—à–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è 
		{
		vsp_long=au_MFC2;									//—Ç–æ —Å—Ä–∞–∑—É –≤—ã—Å—Ç–∞–≤–ª—è–µ–º —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ
		Set5024(&vsp_long,slot_au,B_au_MFC2);				//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì2 = au_MFC2
		au_prev_MFC2=au_MFC2;								//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é "–ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞"
		q_napusk_start.stt=STOP;							//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å
		}
	else
		{
		if ((au_MFC2-au_prev_MFC2)<=200)					//–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ç–æ–∫ –º–µ–Ω–µ–µ —á–µ–º –Ω–∞ 200 –¥–∏—Å–∫—Ä–µ—Ç
			{
			vsp_long=au_MFC2;								//—Ç–æ —Å—Ä–∞–∑—É –≤—ã—Å—Ç–∞–≤–ª—è–µ–º —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ
			Set5024(&vsp_long,slot_au,B_au_MFC2);			//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –†–†–ì2 = au_MFC2
			au_prev_MFC2=au_MFC2;							//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é "–ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞"
			q_napusk_start.stt=STOP;						//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å
			}
		else												//–µ—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –±–æ–ª—å—à–µ —á–µ–º 200 –¥–∏—Å–∫—Ä–µ—Ç
			{
			vsp_long=au_prev_MFC2+200;						
			Set5024(&vsp_long,slot_au,B_au_MFC2);			//—Ç–æ –ø–æ–≤—ã—à–∞–µ–º –ø–æ—Ç–æ–∫ –Ω–∞ 200 –¥–∏—Å–∫—Ä–µ—Ç
			au_prev_MFC2=au_prev_MFC2+200;					//–æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é "–ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞"
			}
		}
}
//-------------------------------- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç -------------------
void otpravka_symvolov(void)
{
	int i,j;
	
	if (Shd_enable_flag < 6)								//–ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
	{
		if (Shd_enable_flag==5) {							//–ï—Å–ª–∏ 4 –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø—Ä–æ—Ü–µ–¥—É—Ä–µ (0: <LM> 1: DS> 2: FS> 3: - 4: <LM>)
			com_tx('E');
			com_tx('N');
                        com_tx('>');
			Shd_enable_flag++;
			return;
		}
		Shd_enable_flag++;
	}
	
	if (smb_to_send==0)										//–µ—Å–ª–∏ –±–æ–ª—å—à–µ –Ω–µ—á–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å
		{
		q_com_tx.stt=STOP;									//–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä—Ü–æ–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏
		R_Quants=R_Quants & mask_off[8];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 8 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤)
		}
	else													//–∏–Ω–∞—á–µ
		{
		i=0;
		while (text_to_send[i]!='>')						//–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª—ã –≤–ø–ª–æ—Ç—å –¥–æ —Å–∏–º–≤–æ–ª–∞ > (–∫–æ–Ω–µ—Ü –∫–æ–º–∞–Ω–¥—ã)
			{
			com_tx(text_to_send[i]);
			i++;
			}
		com_tx(text_to_send[i]);							//–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∞–º —Å–∏–º–≤–æ–ª >
		smb_to_send=smb_to_send-(i+1);						//—É–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
		for (j=0;j<smb_to_send;j++)
			text_to_send[j]=text_to_send[i+1+j];			//–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å–∏–º–≤–æ–ª—ã –≤ –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏
		}
}
//-------------------------------- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—Ö–æ–¥ reset –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –®–î ------------
void SMC_reset(void)
{
	du_off(slot_du,B_du_SMC_reset);							//–ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–∏–≥–Ω–∞–ª –≤ –Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–æ –ø—Ä–æ—à–µ—Å—Ç–≤–∏–∏ 1 —Å–µ–∫.
	q_SMC_reset.stt=STOP;									//–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –æ–ø—Ç–æ–ø–∞—Ä—ã –∏ –ø—Ä–æ—á. —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤, –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å
}	

//=============================== –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ =====================================================

void main(void)
{
	int i;
	int server_error;
	char shd_current_disable[10]="<LM>DS>FS>",
	
	dispetcher = ACTIV;     							//–ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á
	queue = DONUT;										//–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ - –ø–æ –æ—á–µ—Ä–µ–¥–∏
	for (i=0;i<31;i++) Share_Mem[i]=0;					//–û–±–Ω—É–ª–∏–ª–∏ –ø–∞–º—è—Ç—å –æ–±–º–µ–Ω–∞
	
//------------------------------- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π –ü–õ–ö ----------------------------------------------	
	v_mask=0;                                   		//0000 0000 0000 0000
	Set5050(&v_mask,slot_du,0,AWord); 					//–£—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞ –∫–∞–Ω–∞–ª—ã –î–£

	Init5017H(slot_ac);									//–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –º–æ–¥—É–ª—å 5017–ù –ê–ö –ü–õ–ö
    High_Speed();       								//–ø–µ—Ä–µ–≤–µ–ª–∏ –º–æ–¥—É–ª—å –ê–ö –≤ —Ä–µ–∂–∏–º –±—ã—Å—Ç—Ä–æ–≥–æ —Å—á–µ—Ç–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π

	Init5024(slot_au,0,0,0,0); 							//–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –º–æ–¥—É–ª—å 5024 –ê–£ –ü–õ–ö
														//–∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

//------------------------------- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è COM-–ø–æ—Ä—Ç–æ–≤ -----------------------------------------------														
	if (com_install(1)==1)							//–µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—Ç–∞ 1
		err_code=err_code | mask_on[5]; 			//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫ "–æ—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏"
	else err_code=err_code & mask_off[5]; 			//–∏–Ω–∞—á–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 5 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫
	com_set_speed(57600L);							//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±–º–µ–Ω–∞, –±–æ–¥
	com_flush_rx();									//–æ—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞ –ø—Ä–∏–µ–º–∞
	com_flush_tx();									//–æ—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞ –ø–µ—Ä–µ–¥–∞—á–∏
	com_set_format(8,2,1);							//—Ñ–æ—Ä–º–∞—Ç (–¥–ª–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö,—á–µ—Ç–Ω–æ—Å—Ç—å:0-–Ω–µ—Ç/1-–Ω–µ—á–µ—Ç/2-—á–µ—Ç,—Å—Ç–æ–ø –±–∏—Ç 1/2) 
	com_raise_dtr();								//—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞ DTR
	com_raise_rts(0x3F8);   						//–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞ RTS –∑–Ω–∞—á–µ–Ω–∏–µ –æ–¥–Ω–æ–∑–Ω. –¥–ª—è –∫–æ–º 1

//------------------------------- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–µ—Ä–æ–≤ –ü–õ–ö ---------------------------------------------
	if (Timer_Init()==1)								//–µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
		err_code=err_code | mask_on[4]; 				//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ—à–∏–±–æ–∫.
	else err_code=err_code & mask_off[4]; 				//–∏–Ω–∞—á–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –≤ 4 –±–∏—Ç —Ä–µ–≥–∏—Å—Ä–∞ –æ—à–∏–±–æ–∫.
	
														//–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å—É –æ—Ç–∫–∞—á–∫–∏
	q_vacuum_start.tm=Timer_Set(1000);  				//–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å —Ç–∞–π–º–µ—Ä–∞, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –Ω–∞ 1000 –º—Å
	q_vacuum_start.stt=STOP;							//–û—Å—Ç–∞–Ω–æ–≤–ª–∏–≤–∞–µ–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
	Timer_Reset(q_vacuum_start.tm);						//–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Ç–∞–π–º–µ—Ä

	q_vacuum_stop.tm=Timer_Set(1000);					//–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–∫–∞—á–∫–∏
	q_vacuum_stop.stt=STOP;
	Timer_Reset(q_vacuum_stop.tm);

	q_produv_start.tm=Timer_Set(1000);  				//–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å—É –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
	q_produv_start.stt=STOP;
	Timer_Reset(q_produv_start.tm);

	q_napusk_start.tm=Timer_Set(1000);					//–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å—É –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è
	q_napusk_start.stt=STOP;							//–ø–æ—Ç–æ–∫–∞ –≥–∞–∑–æ–Ω–∞—Ç–µ–∫–∞–Ω–∏—è —á–µ—Ä–µ–∑ –†–†–ì
	Timer_Reset(q_napusk_start.tm);

	q_com_tx.tm=Timer_Set(200);							//–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ 
	q_com_tx.stt=STOP;									//—á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞ 200 –º—Å.
	Timer_Reset(q_com_tx.tm);
	
	q_SMC_reset.tm=Timer_Set(1000);						//–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞
	q_SMC_reset.stt=STOP;								//—Å–±—Ä–æ—Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –®–î
	Timer_Reset(q_SMC_reset.tm);
	
														//–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—â–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —ç–º—É–ª—è—Ç–æ—Ä —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
	adv_printf("Timers have been initialized, starting Server...\n");
	
//------------------------------- C–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ TCP ---------------------------------------------------
											
	server_error=ADAMTCP_ModServer_Create(502, 200, 2, (unsigned char *)Share_Mem, sizeof(Share_Mem));
											
														//–ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∫–æ–¥ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
														//–ø–∞—Ä–∞–º–µ—Ç—Ä—ã: (‚Ññ –ø–æ—Ä—Ç–∞, time-out[–º—Å], –∫–æ–ª-–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø–∞–º—è—Ç—å –æ–±–º–µ–Ω–∞)
													
	adv_printf("error code is %d\n", server_error);		//–°–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏ –≤ —ç–º—É–ª—è—Ç–æ—Ä —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
	adv_printf("Server started, wait for connect...\n");

	do													//–û–∂–∏–¥–∞–µ–º
	{}
	while(ADAMTCP_ModServer_Update() != 1); 			//–ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø–µ—Ä–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
	
	adv_printf("First contact has been approached, running dispetcher...\n");
	
//------------------------------- –ò–Ω–∏—Ü–∏–∏—Ä—É–µ–º –≤—ã–∫–ª—é—á–µ–Ω–∏–µ –æ–±–º–æ—Ç–æ–∫ –¥–≤–∏–≥–∞—Ç–µ–ª—è  -------------------------------

	R_Quants=R_Quants | mask_on[8];					//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º 1 –≤ 8 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤)
	q_com_tx.stt=START;								//–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
	pattern_writer(0,10,shd_current_disable);		//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä 10 —Å–∏–º–≤–æ–ª–æ–≤ <LM>DS>FS> —Å –Ω—É–ª–µ–≤–æ–≥–æ
	smb_to_send=10;									//–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏—Ç–æ–≥–æ–≤—É—é –¥–ª–∏–Ω—É –±—É—Ñ–µ—Ä–∞
	
	
//------------------------------- –ó–∞–ø—É—Å–∫–∞–µ–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ------------------------------------------
	DISP:
//------------------------------- –ò–Ω—Ç–µ—Ä–ø—Ä–æ—Ü–µ—Å—Å -----------------------------------------------------------	
		if (ADAMTCP_ModServer_Update())					//–ï—Å–ª–∏ –±—ã–ª–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –≤ —Ä–µ–≥–∏—Å—Ç—Ä —Ü–∏–∫–ª–∞
		if (Share_Mem[20] != 0)							//–±—ã–ª–æ –∑–∞–ø–∏—Å–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ (–±—ã–ª —Ü–∏–∫–ª –∑–∞–ø–∏—Å–∏ —É –∫–ª–∏–µ–Ω—Ç–∞),
			server_update(); 							//—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä (—Å–µ–π—á–∞—Å —É –∫–ª–∏–µ–Ω—Ç–∞ —Ü–∏–∫–ª —á—Ç–µ–Ω–∏—è)
														
//------------------------------- –°–∏–Ω—Ö—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç–∏ --------------------------------
		if (q_vacuum_start.stt==START)           		//–ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏
		if (tmArriveCnt[q_vacuum_start.tm]!=0)			//–ò —Å—Ä–∞–±–æ—Ç–∞–ª —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ 
			{
			vacuum_start();								//–æ–±—Å–ª—É–∂–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—á–∫–∏
			Timer_Reset(q_vacuum_start.tm); 			//–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞
			if (queue==PRIORY) goto DISP;				//–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞, –µ—Å–ª–∏
			}											//–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è

		if (q_vacuum_stop.stt==START)            		//–ü—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–∫–∞—á–∫–∏
		if (tmArriveCnt[q_vacuum_stop.tm]!=0)
			{
			vacuum_stop();
			Timer_Reset(q_vacuum_stop.tm);
			if (queue==PRIORY) goto DISP;				
			}
	
		if (q_produv_start.stt==START)           		//–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥—É–≤–∞ –≥–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
		if (tmArriveCnt[q_produv_start.tm]!=0)
			{
			produv_start();
			Timer_Reset(q_produv_start.tm);
			if (queue==PRIORY) goto DISP;
			}
		
		if (q_napusk_start.stt==START)          		//–ü—Ä–æ—Ü–µ—Å—Å —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –≥–∞–∑–∞ —á–µ—Ä–µ–∑ –†–†–ì
		if (tmArriveCnt[q_napusk_start.tm]!=0)
			{
			napusk_start();
			Timer_Reset(q_napusk_start.tm);
			if (queue==PRIORY) goto DISP;
			}
		
	    if (q_com_tx.stt==START)						//–ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
		if (tmArriveCnt[q_com_tx.tm]!=0)
			{
			otpravka_symvolov();
			Timer_Reset(q_com_tx.tm);
			if (queue==PRIORY) goto DISP;
			}
			
		if (q_SMC_reset.stt==START)						//–ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ —Å–±—Ä–æ—Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –®–î
		if (tmArriveCnt[q_SMC_reset.tm]!=0)
			{
			SMC_reset();
			Timer_Reset(q_SMC_reset.tm);
			if (queue==PRIORY) goto DISP;
			}
		
		if (dispetcher==ACTIV) goto DISP;				//–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –Ω–∞—á–∞–ª–æ –∏–ª–∏ –≤—ã—Ö–æ–¥–∏–º –∏–∑ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
														//–∏ –∑–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞–±–æ—Ç—É

<<<<<<< Updated upstream
	ADAMTCP_ModServer_Release();						//ß†¢•‡Ë•≠®• ‡†°Æ‚Î ·•‡¢•‡† TCP
	com_deinstall();									//ß†¢•‡Ë•≠®• ‡†°Æ‚Î COM-ØÆ‡‚†
	Release_All();										//ß†¢•‡Ë•≠®• ‡†°Æ‚Î Ø‡Æ£‡†¨¨Î
}
=======
	ADAMTCP_ModServer_Release();						//–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ TCP
	com_deinstall();									//–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã COM-–ø–æ—Ä—Ç–∞
	Release_All();										//–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã
}	
>>>>>>> Stashed changes
